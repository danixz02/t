<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam</title>
</head>
<body>
    <select id="cameraSelect"></select>
    <br>
    <video id="webcam" autoplay playsinline></video>
    
    <script>
        // Referência ao elemento select
        var cameraSelect = document.getElementById('cameraSelect');
        // Referência ao elemento de vídeo
        var video = document.getElementById('webcam');
        
        // Verifica se o navegador suporta a API de mediaDevices
        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
            // Enumera os dispositivos de mídia disponíveis
            navigator.mediaDevices.enumerateDevices()
                .then(function(devices) {
                    // Filtra apenas os dispositivos de vídeo
                    var cameras = devices.filter(function(device) {
                        return device.kind === 'videoinput';
                    });
                    
                    // Adiciona as opções do select com os dispositivos encontrados
                    cameras.forEach(function(camera, index) {
                        var option = document.createElement('option');
                        option.value = camera.deviceId;
                        option.text = 'Câmera ' + (index + 1);
                        cameraSelect.appendChild(option);
                    });
                    
                    // Atualiza a fonte de vídeo com a câmera selecionada
                    cameraSelect.onchange = function() {
                        var selectedCamera = cameraSelect.value;
                        var constraints = {
                            video: { deviceId: { exact: selectedCamera } }
                        };
                        navigator.mediaDevices.getUserMedia(constraints)
                            .then(function(stream) {
                                video.srcObject = stream;
                            })
                            .catch(function(error) {
                                console.error('Erro ao acessar a câmera:', error);
                            });
                    };
                    
                    // Seleciona a primeira câmera por padrão
                    if (cameras.length > 0) {
                        var defaultCamera = cameras[0].deviceId;
                        var constraints = {
                            video: { deviceId: { exact: defaultCamera } }
                        };
                        navigator.mediaDevices.getUserMedia(constraints)
                            .then(function(stream) {
                                video.srcObject = stream;
                            })
                            .catch(function(error) {
                                console.error('Erro ao acessar a câmera:', error);
                            });
                    } else {
                        console.error('Nenhuma câmera encontrada.');
                    }
                })
                .catch(function(error) {
                    console.error('Erro ao enumerar dispositivos:', error);
                });
        } else {
            console.error('enumerateDevices não é suportado neste navegador.');
        }
    </script>
</body>
</html>
